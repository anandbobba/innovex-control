<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INNOVEX Controller</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #fff;
            padding: 20px;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        .particles-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .particle-bg {
            position: absolute;
            width: 3px;
            height: 3px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            animation: floatBg 25s infinite;
        }

        @keyframes floatBg {
            0%, 100% {
                transform: translateY(100vh) translateX(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) translateX(80px) rotate(360deg);
                opacity: 0;
            }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: #ff6b6b;
            text-shadow: 0 0 20px rgba(255, 107, 107, 0.5);
        }

        .header p {
            font-size: 1.1rem;
            color: #aaa;
        }

        .status {
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #666;
            animation: pulse 2s infinite;
        }

        .status-indicator.connected {
            background: #4caf50;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .control-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .control-section {
            background: rgba(255, 255, 255, 0.05);
            padding: 25px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .control-section h2 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #ff6b6b;
            border-bottom: 2px solid rgba(255, 107, 107, 0.3);
            padding-bottom: 10px;
        }

        .button-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        button {
            padding: 15px 25px;
            font-size: 1rem;
            font-weight: 600;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        button:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        button:not(:disabled):hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:not(:disabled):hover {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
        }

        .btn-success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
        }

        .btn-success:not(:disabled):hover {
            background: linear-gradient(135deg, #38ef7d 0%, #11998e 100%);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .btn-warning:not(:disabled):hover {
            background: linear-gradient(135deg, #f5576c 0%, #f093fb 100%);
        }

        .btn-danger {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: #333;
        }

        .btn-danger:not(:disabled):hover {
            background: linear-gradient(135deg, #fee140 0%, #fa709a 100%);
        }

        .btn-special {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            color: white;
            font-size: 1.1rem;
            padding: 18px 30px;
        }

        .btn-special:not(:disabled):hover {
            background: linear-gradient(135deg, #ee5a6f 0%, #ff6b6b 100%);
        }

        .input-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        input[type="number"] {
            flex: 1;
            padding: 12px;
            font-size: 1rem;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
            color: #fff;
            outline: none;
            transition: all 0.3s ease;
        }

        input[type="number"]:focus {
            border-color: #667eea;
            background: rgba(255, 255, 255, 0.1);
        }

        .state-display {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.8;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .state-display h3 {
            color: #ff6b6b;
            margin-bottom: 15px;
            font-family: 'Segoe UI', sans-serif;
        }

        .state-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .state-item:last-child {
            border-bottom: none;
        }

        .state-label {
            color: #aaa;
        }

        .state-value {
            color: #4caf50;
            font-weight: bold;
        }

        .warning-text {
            color: #ffd93d;
            font-size: 0.9rem;
            margin-top: 10px;
            padding: 10px;
            background: rgba(255, 217, 61, 0.1);
            border-radius: 5px;
            border-left: 3px solid #ffd93d;
        }

        @media (max-width: 768px) {
            .control-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="particles-bg" id="particlesBg"></div>
    
    <div class="container">
        <div class="header">
            <h1>üéÆ INNOVEX CONTROLLER</h1>
            <p>Remote Control Panel for Big Screen Display</p>
            <div class="status">
                <div class="status-indicator" id="statusIndicator"></div>
                <span id="statusText">Connecting...</span>
            </div>
        </div>

        <div class="control-grid">
            <!-- Video Controls -->
            <div class="control-section">
                <h2>üìπ Video Controls</h2>
                <div class="button-group">
                    <button class="btn-special" id="btnPlayTeaser" disabled>
                        ‚ñ∂ Play Teaser (Auto-start 24h Clock)
                    </button>
                    <button class="btn-primary" id="btnPlayVideo" disabled>
                        ‚ñ∂ Play Video
                    </button>
                    <button class="btn-warning" id="btnSkipVideo" disabled>
                        ‚è≠ Skip Video
                    </button>
                    <button class="btn-danger" id="btnStopVideo" disabled>
                        ‚èπ Stop Video
                    </button>
                </div>
                <div class="warning-text">
                    ‚ö†Ô∏è Teaser automatically starts 24h clock when finished
                </div>
            </div>

            <!-- Clock Controls -->
            <div class="control-section">
                <h2>‚è± Clock Controls</h2>
                <div class="button-group">
                    <button class="btn-success" id="btnStartClock" disabled>
                        ‚ñ∂ Start 24h Clock
                    </button>
                    <button class="btn-warning" id="btnPauseClock" disabled>
                        ‚è∏ Pause Clock
                    </button>
                    <button class="btn-success" id="btnResumeClock" disabled>
                        ‚ñ∂ Resume Clock
                    </button>
                    <button class="btn-danger" id="btnStopClock" disabled>
                        ‚èπ Stop Clock
                    </button>
                </div>
            </div>

            <!-- Custom Time Controls -->
            <div class="control-section">
                <h2>‚öôÔ∏è Custom Time</h2>
                <div class="input-group">
                    <input type="number" id="inputHours" placeholder="Hours" min="0" max="24" value="0">
                    <input type="number" id="inputMinutes" placeholder="Minutes" min="0" max="59" value="0">
                    <input type="number" id="inputSeconds" placeholder="Seconds" min="0" max="59" value="0">
                </div>
                <button class="btn-primary" id="btnSetCustomTime" disabled style="width: 100%; margin-top: 10px;">
                    ‚è± Set Custom Time
                </button>
                <div class="input-group">
                    <input type="number" id="inputTimestamp" placeholder="Unix Timestamp (ms)">
                    <button class="btn-primary" id="btnSyncTimestamp" disabled>
                        Sync Time
                    </button>
                </div>
                <div class="warning-text">
                    üí° Use custom time for testing or specific durations
                </div>
            </div>
        </div>

        <!-- Server State Display -->
        <div class="control-section">
            <div class="state-display">
                <h3>üìä Server State</h3>
                <div class="state-item">
                    <span class="state-label">Video Playing:</span>
                    <span class="state-value" id="stateVideoPlaying">false</span>
                </div>
                <div class="state-item">
                    <span class="state-label">Video Type:</span>
                    <span class="state-value" id="stateVideoType">none</span>
                </div>
                <div class="state-item">
                    <span class="state-label">Clock Running:</span>
                    <span class="state-value" id="stateRunning">false</span>
                </div>
                <div class="state-item">
                    <span class="state-label">End Timestamp:</span>
                    <span class="state-value" id="stateEndTimestamp">null</span>
                </div>
                <div class="state-item">
                    <span class="state-label">Paused Remaining:</span>
                    <span class="state-value" id="statePausedRemaining">null</span>
                </div>
                <div class="state-item">
                    <span class="state-label">Pending Clock (ms):</span>
                    <span class="state-value" id="statePendingClock">null</span>
                </div>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        // Create floating particles background
        const particlesBg = document.getElementById('particlesBg');
        for (let i = 0; i < 60; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle-bg';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.animationDelay = Math.random() * 25 + 's';
            particle.style.animationDuration = (Math.random() * 15 + 20) + 's';
            particlesBg.appendChild(particle);
        }
        
        const socket = io();
        
        // UI Elements
        const statusIndicator = document.getElementById('statusIndicator');
        const statusText = document.getElementById('statusText');
        
        // Buttons
        const btnPlayTeaser = document.getElementById('btnPlayTeaser');
        const btnPlayVideo = document.getElementById('btnPlayVideo');
        const btnSkipVideo = document.getElementById('btnSkipVideo');
        const btnStopVideo = document.getElementById('btnStopVideo');
        const btnStartClock = document.getElementById('btnStartClock');
        const btnPauseClock = document.getElementById('btnPauseClock');
        const btnResumeClock = document.getElementById('btnResumeClock');
        const btnStopClock = document.getElementById('btnStopClock');
        const btnSetCustomTime = document.getElementById('btnSetCustomTime');
        const btnSyncTimestamp = document.getElementById('btnSyncTimestamp');
        
        // Inputs
        const inputHours = document.getElementById('inputHours');
        const inputMinutes = document.getElementById('inputMinutes');
        const inputSeconds = document.getElementById('inputSeconds');
        const inputTimestamp = document.getElementById('inputTimestamp');
        
        // State display
        const stateVideoPlaying = document.getElementById('stateVideoPlaying');
        const stateVideoType = document.getElementById('stateVideoType');
        const stateRunning = document.getElementById('stateRunning');
        const stateEndTimestamp = document.getElementById('stateEndTimestamp');
        const statePausedRemaining = document.getElementById('statePausedRemaining');
        const statePendingClock = document.getElementById('statePendingClock');

        // Socket events
        socket.on('connect', () => {
            statusIndicator.classList.add('connected');
            statusText.textContent = 'Connected';
            enableAllButtons();
        });

        socket.on('disconnect', () => {
            statusIndicator.classList.remove('connected');
            statusText.textContent = 'Disconnected';
            disableAllButtons();
        });

        socket.on('state', (state) => {
            updateStateDisplay(state);
        });

        // Button handlers
        btnPlayTeaser.addEventListener('click', () => {
            socket.emit('play-teaser');
        });

        btnPlayVideo.addEventListener('click', () => {
            socket.emit('play-video');
        });

        btnSkipVideo.addEventListener('click', () => {
            socket.emit('skip-video');
        });

        btnStopVideo.addEventListener('click', () => {
            socket.emit('stop-video');
        });

        btnStartClock.addEventListener('click', () => {
            socket.emit('start-clock', { hours: 24 });
        });

        btnPauseClock.addEventListener('click', () => {
            socket.emit('pause-clock');
        });

        btnResumeClock.addEventListener('click', () => {
            socket.emit('resume-clock');
        });

        btnStopClock.addEventListener('click', () => {
            socket.emit('stop-clock');
        });

        btnSetCustomTime.addEventListener('click', () => {
            const hours = parseInt(inputHours.value) || 0;
            const minutes = parseInt(inputMinutes.value) || 0;
            const seconds = parseInt(inputSeconds.value) || 0;
            
            const totalMs = (hours * 3600 + minutes * 60 + seconds) * 1000;
            
            if (totalMs > 0) {
                socket.emit('set-custom-time', { ms: totalMs });
                inputHours.value = '0';
                inputMinutes.value = '0';
                inputSeconds.value = '0';
            }
        });

        btnSyncTimestamp.addEventListener('click', () => {
            const timestamp = parseInt(inputTimestamp.value);
            if (timestamp > 0) {
                socket.emit('sync-timestamp', { timestamp });
                inputTimestamp.value = '';
            }
        });

        // Helper functions
        function enableAllButtons() {
            btnPlayTeaser.disabled = false;
            btnPlayVideo.disabled = false;
            btnSkipVideo.disabled = false;
            btnStopVideo.disabled = false;
            btnStartClock.disabled = false;
            btnPauseClock.disabled = false;
            btnResumeClock.disabled = false;
            btnStopClock.disabled = false;
            btnSetCustomTime.disabled = false;
            btnSyncTimestamp.disabled = false;
        }

        function disableAllButtons() {
            btnPlayTeaser.disabled = true;
            btnPlayVideo.disabled = true;
            btnSkipVideo.disabled = true;
            btnStopVideo.disabled = true;
            btnStartClock.disabled = true;
            btnPauseClock.disabled = true;
            btnResumeClock.disabled = true;
            btnStopClock.disabled = true;
            btnSetCustomTime.disabled = true;
            btnSyncTimestamp.disabled = true;
        }

        function updateStateDisplay(state) {
            stateVideoPlaying.textContent = state.videoPlaying;
            stateVideoType.textContent = state.videoType || 'none';
            stateRunning.textContent = state.running;
            
            if (state.endTimestamp) {
                const date = new Date(state.endTimestamp);
                stateEndTimestamp.textContent = date.toLocaleString();
            } else {
                stateEndTimestamp.textContent = 'null';
            }
            
            if (state.pausedRemaining) {
                const mins = Math.floor(state.pausedRemaining / 60000);
                const secs = Math.floor((state.pausedRemaining % 60000) / 1000);
                statePausedRemaining.textContent = `${mins}m ${secs}s`;
            } else {
                statePausedRemaining.textContent = 'null';
            }
            
            if (state.pendingClockMs) {
                const hours = Math.floor(state.pendingClockMs / 3600000);
                statePendingClock.textContent = `${hours}h`;
            } else {
                statePendingClock.textContent = 'null';
            }
        }
    </script>
</body>
</html>